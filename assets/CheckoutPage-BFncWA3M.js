import{r as h,c as w,u as v,d as $,j as e,a6 as I,t as a,a7 as y,D as L,e as M,z as E,L as T,a0 as A,m as u,a4 as D,B,J as K,K as _,P as O,a8 as k,a1 as G}from"./index-Cx5O0_ih.js";const J=({items:c=[]})=>{const[t,r]=h.useState(!1);w();const{currentLanguage:i}=v(),{isDarkMode:m}=$(),p=c.map(s=>({name:s.name,quantity:s.quantity||1,price:s.price,unit_amount:Math.round(s.price*100),image:s.image,currency:s.currency||"usd"})),b=async()=>{var s,o;if(!(!c||c.length===0)){r(!0);try{const d=await L.post("/stripe/create-checkout-session",{items:p,successUrl:`${window.location.origin}/checkout/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/checkout/cancel`});if(d.data.url){window.location.href=d.data.url;return}throw new Error("No checkout URL received")}catch(d){(o=(s=d.response)==null?void 0:s.data)!=null&&o.error?alert(d.response.data.error):alert(a("checkout.error",i)||"Unable to create checkout session. Please try again.")}finally{r(!1)}}};return e.jsx("button",{onClick:b,disabled:t||c.length===0,className:`w-full py-3.5 px-6 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 flex items-center justify-center space-x-2 ${t||c.length===0?"opacity-60 cursor-not-allowed bg-gray-400":m?"bg-gradient-to-r from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-r from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:a("checkout.processing",i)||"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:a("checkout.proceedToPayment",i)||"Proceed to Payment"})]})})},Y=()=>{const c=w(),{currentLanguage:t}=v(),{isDarkMode:r}=$(),{cartItems:i,getCartTotal:m,clearCart:p}=M(),{isAuthenticated:b,user:s}=E(),[o,d]=h.useState({fullName:(s==null?void 0:s.fullName)||"",email:(s==null?void 0:s.email)||"",phone:"",address:"",city:"",state:"",postalCode:"",country:"United States"}),[R,z]=h.useState({sameAsShipping:!0,fullName:"",address:"",city:"",state:"",postalCode:"",country:"United States"}),[f,C]=h.useState("card"),[H,j]=h.useState(!1);h.useEffect(()=>{i.length===0&&c("/shop")},[i,c]);const x=m(),g=x>50?0:9.99,N=x*.08,S=x+g+N,n=l=>{const{name:P,value:q}=l.target;d(U=>({...U,[P]:q}))},F=async l=>{l.preventDefault(),j(!0),j(!1)};return i.length===0?null:e.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(T,{to:"/shop",className:`inline-flex items-center space-x-2 mb-4 px-4 py-2 rounded-xl transition-all duration-200 ${r?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:a("checkout.backToShop",t)||"Back to Shop"})]}),e.jsx("h1",{className:`text-3xl md:text-4xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:a("checkout.title",t)||"Checkout"}),e.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:a("checkout.subtitle",t)||"Complete your order below"})]}),e.jsx("form",{onSubmit:F,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`rounded-2xl shadow-lg p-6 ${r?"bg-gray-800/50 backdrop-blur-md border border-gray-700/50":"bg-white/50 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r?"bg-gradient-to-br from-primary-dark to-primary-light":"bg-gradient-to-br from-primary-light to-primary-dark"}`,children:e.jsx(D,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:a("checkout.shipping",t)||"Shipping Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.fullName",t)||"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("input",{type:"text",name:"fullName",value:o.fullName,onChange:n,required:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.fullNamePlaceholder",t)||"John Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.email",t)||"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:n,required:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.emailPlaceholder",t)||"your@email.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.phone",t)||"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:n,required:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.phonePlaceholder",t)||"+1 234 567 8900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.address",t)||"Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${r?"text-gray-500":"text-gray-400"}`}),e.jsx("input",{type:"text",name:"address",value:o.address,onChange:n,required:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.addressPlaceholder",t)||"123 Main Street"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.city",t)||"City"}),e.jsx("input",{type:"text",name:"city",value:o.city,onChange:n,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.cityPlaceholder",t)||"City"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.state",t)||"State"}),e.jsx("input",{type:"text",name:"state",value:o.state,onChange:n,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.statePlaceholder",t)||"State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.postalCode",t)||"Postal Code"}),e.jsx("input",{type:"text",name:"postalCode",value:o.postalCode,onChange:n,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 ${r?"bg-gray-700 border-gray-600 text-white placeholder-gray-500 focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:a("checkout.postalCodePlaceholder",t)||"12345"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-semibold mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:a("checkout.country",t)||"Country"}),e.jsxs("select",{name:"country",value:o.country,onChange:n,required:!0,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 appearance-none cursor-pointer ${r?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,children:[e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Canada",children:"Canada"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"Australia",children:"Australia"}),e.jsx("option",{value:"Germany",children:"Germany"}),e.jsx("option",{value:"France",children:"France"}),e.jsx("option",{value:"Spain",children:"Spain"}),e.jsx("option",{value:"Italy",children:"Italy"})]})]})]})]}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`rounded-2xl shadow-lg p-6 ${r?"bg-gray-800/50 backdrop-blur-md border border-gray-700/50":"bg-white/50 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r?"bg-gradient-to-br from-primary-dark to-primary-light":"bg-gradient-to-br from-primary-light to-primary-dark"}`,children:e.jsx(y,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:a("checkout.payment",t)||"Payment Method"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-center space-x-3 p-4 rounded-xl cursor-pointer transition-all duration-200 ${f==="card"?r?"bg-gray-700 border-2 border-primary-light":"bg-gray-50 border-2 border-primary-dark":r?"bg-gray-700/50 border-2 border-gray-600 hover:border-gray-500":"bg-white border-2 border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"card",checked:f==="card",onChange:l=>C(l.target.value),className:"w-4 h-4"}),e.jsx(y,{className:`w-5 h-5 ${r?"text-gray-300":"text-gray-700"}`}),e.jsx("span",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:a("checkout.card",t)||"Credit/Debit Card"}),e.jsx("div",{className:"ml-auto",children:e.jsx(k,{className:`w-4 h-4 ${r?"text-gray-400":"text-gray-500"}`})})]}),e.jsx("p",{className:`text-xs pl-11 ${r?"text-gray-400":"text-gray-500"}`,children:a("checkout.securePayment",t)||"Your payment will be processed securely by Stripe"})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`sticky top-8 rounded-2xl shadow-lg p-6 ${r?"bg-gray-800/50 backdrop-blur-md border border-gray-700/50":"bg-white/50 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${r?"bg-gradient-to-br from-primary-dark to-primary-light":"bg-gradient-to-br from-primary-light to-primary-dark"}`,children:e.jsx(G,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:a("checkout.orderSummary",t)||"Order Summary"})]}),e.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:i.map(l=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:l.image,alt:l.name,className:"w-16 h-16 object-cover rounded-xl"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-semibold truncate ${r?"text-white":"text-gray-900"}`,children:l.name}),e.jsxs("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:["Qty: ",l.quantity]})]}),e.jsxs("p",{className:`text-sm font-bold ${r?"text-primary-light":"text-primary-dark"}`,children:["$",(l.price*l.quantity).toFixed(2)]})]},l.id))}),e.jsxs("div",{className:`border-t pt-4 space-y-3 mb-6 ${r?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:a("checkout.subtotal",t)||"Subtotal"}),e.jsxs("span",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:["$",x.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:a("checkout.shipping",t)||"Shipping"}),e.jsx("span",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:g===0?e.jsx("span",{className:`${r?"text-green-400":"text-green-600"}`,children:a("checkout.free",t)||"Free"}):`$${g.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:a("checkout.tax",t)||"Tax"}),e.jsxs("span",{className:`text-sm font-medium ${r?"text-white":"text-gray-900"}`,children:["$",N.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between pt-3 border-t ${r?"border-gray-700":"border-gray-200"}`,children:[e.jsx("span",{className:`text-lg font-bold ${r?"text-white":"text-gray-900"}`,children:a("checkout.total",t)||"Total"}),e.jsxs("span",{className:`text-lg font-bold ${r?"text-primary-light":"text-primary-dark"}`,children:["$",S.toFixed(2)]})]})]}),e.jsx(J,{items:i}),e.jsxs("div",{className:`mt-4 flex items-center justify-center space-x-2 text-xs ${r?"text-gray-400":"text-gray-500"}`,children:[e.jsx(k,{className:"w-3 h-3"}),e.jsx("span",{children:a("checkout.secureCheckout",t)||"Secure Checkout"})]})]})})]})})]})})};export{Y as default};
