import{H as b,C as D,u as T,d as L,r as o,t as a,j as e,m as g,a6 as E,aa as P,L as _,ae as q,A as B,B as k,q as $,o as V,a4 as I,p as M}from"./index-BTOD8xPl.js";const H=async(c={})=>await b.get("/orders",{params:c}),Q=async c=>await b.get(`/orders/${c}`),R=async(c,t)=>await b.post(`/orders/${c}/cancel`,{reason:t}),Y=()=>{const{user:c}=D(),{currentLanguage:t}=T(),{isDarkMode:r}=L(),[h,F]=o.useState([]),[p,u]=o.useState(!0),[d,y]=o.useState(null),[x,C]=o.useState("all"),[j,m]=o.useState(null);o.useEffect(()=>{N()},[x]);const N=async()=>{var s,i;u(!0),m(null);try{const n=await H(x!=="all"?{status:x}:{});n.data.success&&F(n.data.data.orders||[])}catch(l){m(((i=(s=l.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to load orders")}finally{u(!1)}},S=async s=>{var i,l;try{const n=await Q(s);n.data.success&&y(n.data.data.order)}catch(n){m(((l=(i=n.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to load order details")}},A=async s=>{var i,l;if(window.confirm(a("orders.confirmCancel",t)||"Are you sure you want to cancel this order?"))try{(await R(s)).data.success&&(N(),(d==null?void 0:d._id)===s&&y(null))}catch(n){m(((l=(i=n.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to cancel order")}},w=s=>{switch(s){case"pending":return e.jsx(M,{className:"w-5 h-5"});case"processing":return e.jsx($,{className:"w-5 h-5"});case"shipped":return e.jsx(I,{className:"w-5 h-5"});case"delivered":return e.jsx(V,{className:"w-5 h-5"});case"cancelled":return e.jsx(k,{className:"w-5 h-5"});default:return e.jsx($,{className:"w-5 h-5"})}},f=s=>{switch(s){case"pending":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";case"processing":return"text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30";case"shipped":return"text-purple-600 bg-purple-100 dark:text-purple-400 dark:bg-purple-900/30";case"delivered":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";case"cancelled":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},v=s=>s?new Date(s).toLocaleDateString(t==="en"?"en-US":t,{year:"numeric",month:"long",day:"numeric"}):"",O=[{id:"all",label:a("orders.all",t)||"All Orders"},{id:"pending",label:a("orders.pending",t)||"Pending"},{id:"processing",label:a("orders.processing",t)||"Processing"},{id:"shipped",label:a("orders.shipped",t)||"Shipped"},{id:"delivered",label:a("orders.delivered",t)||"Delivered"},{id:"cancelled",label:a("orders.cancelled",t)||"Cancelled"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:a("orders.title",t)||"My Orders"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("orders.subtitle",t)||"View and manage your orders"})]}),e.jsx("div",{className:"mb-6 flex flex-wrap gap-3",children:O.map(s=>e.jsx("button",{onClick:()=>C(s.id),className:`px-4 py-2 rounded-xl font-medium transition-all duration-200 ${x===s.id?r?"bg-gradient-to-r from-primary-dark to-primary-light text-white shadow-md":"bg-gradient-to-r from-primary-light to-primary-dark text-white shadow-md":r?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:s.label},s.id))}),j&&e.jsx(g.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`mb-6 p-4 rounded-xl ${r?"bg-red-900/30 border border-red-700":"bg-red-50 border border-red-200"}`,children:e.jsx("p",{className:`${r?"text-red-400":"text-red-600"}`,children:j})}),p&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-primary-light"})}),!p&&h.length===0&&e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`rounded-2xl shadow-lg p-12 text-center ${r?"bg-gray-800/50 backdrop-blur-md border border-gray-700/50":"bg-white/50 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx(P,{className:`w-16 h-16 mx-auto mb-4 ${r?"text-gray-600":"text-gray-400"}`}),e.jsx("h3",{className:`text-xl font-semibold mb-2 ${r?"text-white":"text-gray-900"}`,children:a("orders.noOrders",t)||"No orders found"}),e.jsx("p",{className:`mb-6 ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.noOrdersDesc",t)||"You haven't placed any orders yet."}),e.jsx(_,{to:"/shop",className:`inline-block px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 ${r?"bg-gradient-to-r from-primary-dark to-primary-light text-white":"bg-gradient-to-r from-primary-light to-primary-dark text-white"}`,children:a("orders.shopNow",t)||"Shop Now"})]}),!p&&h.length>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:h.map(s=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`rounded-2xl shadow-lg overflow-hidden ${r?"bg-gray-800/50 backdrop-blur-md border border-gray-700/50":"bg-white/50 backdrop-blur-md border border-gray-200/50"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`text-lg font-semibold mb-1 ${r?"text-white":"text-gray-900"}`,children:[a("orders.orderNumber",t)||"Order"," ",s.orderNumber]}),e.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:v(s.createdAt)})]}),e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full ${f(s.status)}`,children:[w(s.status),e.jsx("span",{className:"text-sm font-medium",children:a(`orderTracking.status.${s.status}`,t)||s.status})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:`text-sm mb-2 ${r?"text-gray-400":"text-gray-600"}`,children:[s.items.length," ",s.items.length===1?"item":"items"]}),e.jsxs("div",{className:"flex -space-x-2",children:[s.items.slice(0,4).map((i,l)=>e.jsx("img",{src:i.image,alt:i.name,className:"w-12 h-12 rounded-lg border-2 border-white dark:border-gray-800 object-cover"},l)),s.items.length>4&&e.jsxs("div",{className:`w-12 h-12 rounded-lg border-2 border-white dark:border-gray-800 flex items-center justify-center text-xs font-semibold ${r?"bg-gray-700 text-white":"bg-gray-100 text-gray-700"}`,children:["+",s.items.length-4]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.total",t)||"Total"}),e.jsxs("p",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:["$",s.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[["pending","processing"].includes(s.status)&&e.jsx("button",{onClick:()=>A(s._id),className:`px-4 py-2 rounded-xl font-medium transition-all duration-200 ${r?"bg-red-900/30 text-red-400 hover:bg-red-900/50":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:a("orders.cancel",t)||"Cancel"}),e.jsxs("button",{onClick:()=>S(s._id),className:`px-4 py-2 rounded-xl font-medium transition-all duration-200 ${r?"bg-gradient-to-r from-primary-dark to-primary-light text-white":"bg-gradient-to-r from-primary-light to-primary-dark text-white"}`,children:[e.jsx(q,{className:"w-4 h-4 inline mr-2"}),a("orders.view",t)||"View"]})]})]})]})},s._id))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(B,{children:d&&e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`rounded-2xl shadow-lg p-6 sticky top-6 ${r?"bg-gray-800/50 backdrop-blur-md border border-gray-700/50":"bg-white/50 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:a("orders.orderDetails",t)||"Order Details"}),e.jsx("button",{onClick:()=>y(null),className:`p-2 rounded-lg ${r?"hover:bg-gray-700":"hover:bg-gray-100"}`,children:e.jsx(k,{className:`w-5 h-5 ${r?"text-gray-400":"text-gray-600"}`})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.orderNumber",t)||"Order Number"}),e.jsx("p",{className:`font-semibold ${r?"text-white":"text-gray-900"}`,children:d.orderNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.date",t)||"Date"}),e.jsx("p",{className:`font-semibold ${r?"text-white":"text-gray-900"}`,children:v(d.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm mb-1 ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.status",t)||"Status"}),e.jsxs("div",{className:`inline-flex items-center space-x-2 px-3 py-1 rounded-full ${f(d.status)}`,children:[w(d.status),e.jsx("span",{className:"text-sm font-medium",children:a(`orderTracking.status.${d.status}`,t)||d.status})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:`text-sm mb-3 ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.items",t)||"Items"}),e.jsx("div",{className:"space-y-3",children:d.items.map((s,i)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-medium ${r?"text-white":"text-gray-900"}`,children:s.name}),e.jsxs("p",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:["Qty: ",s.quantity," Ã— $",s.price.toFixed(2)]})]}),e.jsxs("p",{className:`font-semibold ${r?"text-white":"text-gray-900"}`,children:["$",(s.price*s.quantity).toFixed(2)]})]},i))})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:a("checkout.subtotal",t)||"Subtotal"}),e.jsxs("span",{className:r?"text-white":"text-gray-900",children:["$",d.subtotal.toFixed(2)]})]}),d.shippingCost>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:a("checkout.shipping",t)||"Shipping"}),e.jsxs("span",{className:r?"text-white":"text-gray-900",children:["$",d.shippingCost.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:a("checkout.tax",t)||"Tax"}),e.jsxs("span",{className:r?"text-white":"text-gray-900",children:["$",d.tax.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("span",{className:`font-semibold ${r?"text-white":"text-gray-900"}`,children:a("checkout.total",t)||"Total"}),e.jsxs("span",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:["$",d.total.toFixed(2)]})]})]}),d.shippingAddress&&e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:`text-sm mb-2 text-left ${r?"text-gray-400":"text-gray-600"}`,children:a("orders.shippingAddress",t)||"Shipping Address"}),e.jsxs("p",{className:`text-sm text-left ${r?"text-white":"text-gray-900"}`,children:[d.shippingAddress.fullName,e.jsx("br",{}),d.shippingAddress.address,e.jsx("br",{}),d.shippingAddress.city,", ",d.shippingAddress.state," ",d.shippingAddress.postalCode,e.jsx("br",{}),d.shippingAddress.country]})]})]})]})})})]})]})})};export{Y as default};
