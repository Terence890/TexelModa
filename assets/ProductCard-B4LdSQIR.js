import{r as C,b as P,u as A,c as I,d as U,j as e,m as d,L as $,t as s,R as D}from"./index-D3WZS4iB.js";const B=({product:l})=>{const[k,x]=C.useState(!1),[p,w]=C.useState(!1),y=P(),{currentLanguage:a}=A(),{addToCart:L}=I(),{wishlistItems:T,addToWishlist:W,removeFromWishlist:z}=U();if(!l)return null;const{id:b,name:g,price:h,image:c,category:i,rating:f=0,reviewCount:R=0,sizes:o=[],colors:n=[],isNew:E=!1,isFeatured:M=!1}=l,S=t=>{t.preventDefault();const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{const u=document.createElement("canvas");u.width=r.width,u.height=r.height,u.getContext("2d").drawImage(r,0,0);try{const v=u.toDataURL("image/jpeg");console.log("Successfully converted image to data URL"),y("/try-on",{state:{selectedClothing:v}})}catch(v){console.error("Error converting image to data URL:",v),console.log("Falling back to original image path"),y("/try-on",{state:{selectedClothing:c}})}},r.onerror=()=>{console.error("Failed to load image for try-on"),y("/try-on",{state:{selectedClothing:c}})},r.src=c},j=()=>{if(!n||!Array.isArray(n)||n.length===0)return null;const t={white:"bg-white border border-gray-200",black:"bg-black",grey:"bg-gray-500",blue:"bg-blue-500",navy:"bg-blue-800",red:"bg-red-500",green:"bg-green-500",yellow:"bg-yellow-400",purple:"bg-purple-500",pink:"bg-pink-400",orange:"bg-orange-500",brown:"bg-amber-700",beige:"bg-amber-100",floral:"bg-gradient-to-r from-pink-300 via-green-200 to-blue-300",denim:"bg-blue-700"};return e.jsx("div",{className:"flex space-x-1 mt-2",children:n.map(r=>e.jsx("div",{className:`${t[r]||"bg-gray-200"} w-4 h-4 rounded-full`,title:r.charAt(0).toUpperCase()+r.slice(1)},r))})},N=()=>f==null?null:e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ${t<=Math.round(f)?"fill-current":"text-gray-300"}`,viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(",R||0,")"]})]}),F=t=>{t.preventDefault(),L(l)},m=T.some(t=>t.id===b),H=t=>{t.preventDefault(),m?z(b):W(l)};return e.jsxs(e.Fragment,{children:[e.jsx(d.div,{className:"group relative",whileHover:{y:-8},transition:{type:"spring",stiffness:300},onHoverStart:()=>x(!0),onHoverEnd:()=>x(!1),children:e.jsxs($,{to:`/product/${b}`,className:"block overflow-hidden bg-white dark:bg-surface-dark rounded-lg shadow-md hover:shadow-xl dark:shadow-gray-800 dark:hover:shadow-gray-700/50 transition-all duration-300 h-full",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"aspect-[3/4] w-full overflow-hidden bg-gray-100 dark:bg-gray-800",children:e.jsx("img",{src:c,alt:g,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"})}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-col space-y-2",children:[E&&e.jsx("span",{className:"bg-primary text-white text-xs font-bold px-3 py-1 rounded shadow-sm",children:s("product.new",a)||"NEW"}),M&&e.jsx("span",{className:"bg-secondary text-white text-xs font-bold px-3 py-1 rounded shadow-sm",children:s("product.featured",a)||"FEATURED"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-3 mt-4 mb-2",children:[e.jsx(d.button,{onClick:t=>{t.preventDefault(),w(!0)},className:"bg-white dark:bg-gray-800 text-primary dark:text-primary-light rounded-full p-3 hover:bg-primary hover:text-white dark:hover:bg-primary-light dark:hover:text-gray-800 transition-colors shadow-md",whileHover:{scale:1.1},whileTap:{scale:.9},title:s("product.preview",a)||"Preview",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx(d.button,{onClick:H,className:`bg-white dark:bg-gray-800 ${m?"text-red-500":"text-primary dark:text-primary-light"} rounded-full p-3 hover:bg-primary hover:text-white dark:hover:bg-primary-light dark:hover:text-gray-800 transition-colors shadow-md`,whileHover:{scale:1.1},whileTap:{scale:.9},title:m?s("wishlist.remove",a)||"Remove from Wishlist":s("wishlist.addToWishlist",a)||"Add to Wishlist",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:m?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsx(d.button,{onClick:S,className:"bg-white dark:bg-gray-800 text-primary dark:text-primary-light rounded-full p-3 hover:bg-primary hover:text-white dark:hover:bg-primary-light dark:hover:text-gray-800 transition-colors shadow-md",whileHover:{scale:1.1},whileTap:{scale:.9},title:s("product.tryOnThis",a)||"Try On This Item",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 font-medium",children:i?s(`shop.category.${i.replace("-","")}`,a)||i.replace("-"," "):s("product.uncategorized",a)||"Uncategorized"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-lg leading-tight mb-2 truncate",children:g||"Product Name"}),N(),e.jsxs("div",{className:"mt-3 flex justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[j(),o&&o.length>0&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 font-medium",children:o.join(" · ")})]}),e.jsxs("div",{className:"text-lg font-bold text-primary dark:text-primary-light",children:["$",typeof h=="number"?h.toFixed(2):"0.00"]})]}),e.jsx("div",{className:"py-3 mt-4 border-t border-gray-100 dark:border-gray-700",children:e.jsx(d.button,{onClick:F,className:"w-full bg-primary text-white py-2.5 rounded-md hover:bg-primary/90 transition-colors text-sm font-medium shadow-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:s("product.addToCart",a)||"Add to Cart"})})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 transition-all duration-300",onClick:()=>w(!1),children:e.jsxs(d.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.22,ease:"easeOut"},className:"relative w-full max-w-3xl mx-auto flex flex-col md:flex-row items-center md:items-stretch rounded-2xl overflow-hidden bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-700 hover:text-red-500 dark:text-gray-200 dark:hover:text-red-400 text-3xl font-bold bg-gray-100 dark:bg-gray-800 rounded-full px-3 py-1.5 shadow-md z-10",onClick:()=>w(!1),"aria-label":"Close preview",children:"×"}),e.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center bg-white dark:bg-gray-900 p-6 md:p-8 border-b md:border-b-0 md:border-r border-gray-100 dark:border-gray-800",children:e.jsx(O,{src:c,alt:g})}),e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col items-center md:items-start px-8 py-6 gap-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center md:text-left truncate max-w-full mb-1",children:g}),e.jsxs("div",{className:"text-lg font-bold text-primary dark:text-primary-light mb-1",children:["$",typeof h=="number"?h.toFixed(2):"0.00"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-300 uppercase tracking-wider mb-1 font-medium",children:i?s(`shop.category.${i.replace("-","")}`,a)||i.replace("-"," "):s("product.uncategorized",a)||"Uncategorized"}),e.jsx("div",{className:"mb-1",children:N()}),o&&o.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300 font-medium",children:"Sizes:"}),e.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-100 font-semibold",children:o.join(" · ")})]}),n&&n.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300 font-medium",children:"Colors:"}),e.jsx("div",{className:"flex space-x-1",children:j()})]}),l.description&&e.jsx("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-200 text-left max-w-xl",children:l.description})]})]})})]})};B.defaultProps={product:{id:1,name:"Classic White T-Shirt",price:29.99,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",category:"T-Shirts",isFeatured:!0}};function O({src:l,alt:k}){const[x,p]=D.useState(!1);return x?e.jsxs("div",{className:"w-full h-[80vh] flex flex-col items-center justify-center bg-gradient-to-br from-gray-200/60 to-gray-400/40 dark:from-gray-800/60 dark:to-gray-900/40 rounded-3xl",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-gray-400 dark:text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L6 21h12l-3.75-4M12 3v13"})}),e.jsx("span",{className:"text-gray-500 dark:text-gray-300 text-lg",children:"Image not available"})]}):e.jsx("img",{src:l,alt:k,className:"w-full h-[80vh] object-cover bg-white/30 dark:bg-gray-900/30 rounded-3xl transition-all duration-300",style:{aspectRatio:"3/4",background:"transparent"},onError:()=>p(!0)})}export{B as P};
