import{B as S,x as I,u as M,d as T,r as c,C as O,D as B,j as e,m as f,i as U,t as r,y as L,E as V,H as G,I as _,J,K as q,_ as H,M as g,w as z,N as D,O as K,P as Q,Q as R,T as W,U as X,V as Y,X as Z}from"./index-04pfWkt-.js";const ee=async o=>await S.put("/users/profile",o),re=async o=>{const s=new FormData;return s.append("avatar",o),await S.post("/users/avatar",s,{headers:{"Content-Type":"multipart/form-data"}})},te=async()=>await S.get("/users/addresses"),ae=async o=>await S.post("/users/addresses",o),se=async(o,s)=>await S.put(`/users/addresses/${o}`,s),le=async o=>await S.delete(`/users/addresses/${o}`),ie=q({fullName:g().min(2,"Name must be at least 2 characters"),phone:g().optional(),gender:H(["male","female","other","prefer-not-to-say"]).optional()}),de=({onSuccess:o})=>{const{user:s,updateUser:i}=I(),{currentLanguage:t}=M(),{isDarkMode:a}=T(),[x,b]=c.useState(!1),[$,u]=c.useState(!1),[F,m]=c.useState(!1),[h,n]=c.useState(""),[j,d]=c.useState((s==null?void 0:s.avatar)||null),{register:N,handleSubmit:A,formState:{errors:l},reset:p}=O({resolver:B(ie),defaultValues:{fullName:(s==null?void 0:s.fullName)||"",phone:(s==null?void 0:s.phone)||"",gender:(s==null?void 0:s.gender)||""}});c.useEffect(()=>{s&&(p({fullName:s.fullName||"",phone:s.phone||"",gender:s.gender||""}),d(s.avatar||null))},[s,p]);const y=async E=>{var P,k;const w=E.target.files[0];if(w){if(!w.type.startsWith("image/")){n("Please select an image file");return}if(w.size>5*1024*1024){n("Image size must be less than 5MB");return}u(!0),n("");try{const C=await re(w);C.data.success&&(d(C.data.data.avatar),i({...s,avatar:C.data.data.avatar}),m(!0),setTimeout(()=>m(!1),3e3))}catch(C){n(((k=(P=C.response)==null?void 0:P.data)==null?void 0:k.message)||"Failed to upload avatar")}finally{u(!1)}}},v=async E=>{var w,P;b(!0),n(""),m(!1);try{const k=await ee(E);k.data.success&&(i(k.data.data.user),m(!0),setTimeout(()=>{m(!1),o&&o()},2e3))}catch(k){n(((P=(w=k.response)==null?void 0:w.data)==null?void 0:P.message)||"Failed to update profile")}finally{b(!1)}};return e.jsxs("div",{className:"space-y-6",children:[F&&e.jsxs(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-green-500/20 border border-green-500/50 flex items-center space-x-2",children:[e.jsx(U,{className:"text-green-500 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:r("profile.updateSuccess",t)||"Profile updated successfully!"})]}),h&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-red-500/20 border border-red-500/50",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h})}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("profile.avatar",t)||"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden border-2 ${a?"border-gray-600":"border-gray-300"}`,children:j?e.jsx("img",{src:j,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:`w-full h-full flex items-center justify-center ${a?"bg-gray-700":"bg-gray-200"}`,children:e.jsx(L,{className:`text-4xl ${a?"text-gray-500":"text-gray-400"}`})})}),e.jsx("label",{htmlFor:"avatar-upload",className:`absolute bottom-0 right-0 p-2 rounded-full cursor-pointer transition-all duration-200 shadow-md hover:shadow-lg ${a?"bg-gradient-to-br from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-br from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:y,className:"hidden",disabled:$})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:r("profile.avatarHint",t)||"Click camera icon to upload"}),$&&e.jsx("p",{className:"text-sm text-primary-light",children:"Uploading..."})]})]})]}),e.jsxs("form",{onSubmit:A(v),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("auth.fullName",t)||"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...N("fullName"),type:"text",id:"fullName",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${l.fullName?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.fullNamePlaceholder",t)||"John Doe"})]}),l.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("auth.email",t)||"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(G,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{type:"email",id:"email",value:(s==null?void 0:s.email)||"",disabled:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border ${a?"bg-gray-700/50 border-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed"}`})]}),e.jsx("p",{className:`mt-1 text-xs ${a?"text-gray-500":"text-gray-400"}`,children:r("profile.emailHint",t)||"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("auth.phone",t)||"Phone"," (",r("auth.optional",t)||"Optional",")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...N("phone"),type:"tel",id:"phone",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${l.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.phonePlaceholder",t)||"+1 234 567 8900"})]}),l.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.phone.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"gender",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("auth.gender",t)||"Gender"," (",r("auth.optional",t)||"Optional",")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsxs("select",{...N("gender"),id:"gender",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${l.gender?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"",children:r("auth.selectGender",t)||"Select gender"}),e.jsx("option",{value:"male",children:r("auth.male",t)||"Male"}),e.jsx("option",{value:"female",children:r("auth.female",t)||"Female"}),e.jsx("option",{value:"other",children:r("auth.other",t)||"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:r("auth.preferNotToSay",t)||"Prefer not to say"})]})]}),l.gender&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.gender.message})]}),e.jsx("button",{type:"submit",disabled:x,className:`w-full py-3.5 px-6 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 ${x?"bg-gray-400 cursor-not-allowed":a?"bg-gradient-to-r from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-r from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:x?r("profile.updating",t)||"Updating...":r("profile.update",t)||"Update Profile"})]})]})},oe=q({type:H(["billing","shipping","both"]),fullName:g().min(2,"Full name must be at least 2 characters"),phone:g().optional(),addressLine1:g().min(5,"Address line 1 is required"),addressLine2:g().optional(),city:g().min(2,"City is required"),state:g().min(2,"State/Province is required"),postalCode:g().min(3,"Postal code is required"),country:g().min(2,"Country is required"),isDefault:W().optional()}),ne=({address:o,onSuccess:s,onCancel:i})=>{const{currentLanguage:t}=M(),{isDarkMode:a}=T(),[x,b]=c.useState(!1),[$,u]=c.useState(!1),[F,m]=c.useState(""),h=!!o,{register:n,handleSubmit:j,formState:{errors:d},reset:N}=O({resolver:B(oe),defaultValues:o||{type:"both",fullName:"",phone:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:"United States",isDefault:!1}}),A=async l=>{var p,y;b(!0),m(""),u(!1);try{let v;h?v=await se(o._id,l):v=await ae(l),v.data.success&&(u(!0),N(),setTimeout(()=>{u(!1),s&&s()},2e3))}catch(v){m(((y=(p=v.response)==null?void 0:p.data)==null?void 0:y.message)||`Failed to ${h?"update":"add"} address`)}finally{b(!1)}};return e.jsxs("div",{className:`rounded-2xl shadow-lg p-6 ${a?"bg-gray-800/95 backdrop-blur-md border border-gray-700":"bg-white/95 backdrop-blur-md border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-xl font-bold ${a?"text-white":"text-gray-900"}`,children:h?r("address.edit",t)||"Edit Address":r("address.add",t)||"Add New Address"}),i&&e.jsx("button",{onClick:i,className:`p-2 rounded-full transition-colors ${a?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx(z,{className:"w-5 h-5"})})]}),$&&e.jsxs(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-lg bg-green-500/20 border border-green-500/50 flex items-center space-x-2",children:[e.jsx(U,{className:"text-green-500"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:r("address.success",t)||"Address saved successfully!"})]}),F&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-lg bg-red-500/20 border border-red-500/50",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:F})}),e.jsxs("form",{onSubmit:j(A),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.type",t)||"Address Type"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsxs("select",{...n("type"),id:"type",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.type?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"both",children:r("address.both",t)||"Both (Billing & Shipping)"}),e.jsx("option",{value:"billing",children:r("address.billing",t)||"Billing"}),e.jsx("option",{value:"shipping",children:r("address.shipping",t)||"Shipping"})]})]}),d.type&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.type.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("auth.fullName",t)||"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("fullName"),type:"text",id:"fullName",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.fullName?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.fullNamePlaceholder",t)||"John Doe"})]}),d.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.fullName.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("auth.phone",t)||"Phone"," (",r("auth.optional",t)||"Optional",")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("phone"),type:"tel",id:"phone",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.phonePlaceholder",t)||"+1 234 567 8900"})]}),d.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"addressLine1",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.line1",t)||"Address Line 1"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("addressLine1"),type:"text",id:"addressLine1",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.addressLine1?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.line1Placeholder",t)||"Street address, P.O. box"})]}),d.addressLine1&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.addressLine1.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"addressLine2",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("address.line2",t)||"Address Line 2"," (",r("auth.optional",t)||"Optional",")"]}),e.jsx("input",{...n("addressLine2"),type:"text",id:"addressLine2",className:`w-full px-4 py-3 rounded-lg border transition-colors text-left ${d.addressLine2?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.line2Placeholder",t)||"Apartment, suite, unit, building, floor, etc."}),d.addressLine2&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.addressLine2.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.city",t)||"City"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("city"),type:"text",id:"city",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.city?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.cityPlaceholder",t)||"City"})]}),d.city&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.state",t)||"State/Province"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("state"),type:"text",id:"state",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.state?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.statePlaceholder",t)||"State"})]}),d.state&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.state.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postalCode",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.postalCode",t)||"Postal Code"}),e.jsx("input",{...n("postalCode"),type:"text",id:"postalCode",className:`w-full px-4 py-3 rounded-lg border transition-colors text-left ${d.postalCode?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.postalCodePlaceholder",t)||"12345"}),d.postalCode&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.postalCode.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.country",t)||"Country"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("country"),type:"text",id:"country",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${d.country?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.countryPlaceholder",t)||"United States"})]}),d.country&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.country.message})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("isDefault"),type:"checkbox",id:"isDefault",className:`w-4 h-4 rounded border-gray-300 text-primary-light focus:ring-primary-light ${a?"bg-gray-700 border-gray-600":"bg-white"}`}),e.jsx("label",{htmlFor:"isDefault",className:`ml-2 text-sm ${a?"text-gray-300":"text-gray-700"}`,children:r("address.setDefault",t)||"Set as default address"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:x,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${x?"bg-gray-400 cursor-not-allowed":a?"bg-primary-dark hover:bg-primary-light text-white":"bg-primary-light hover:bg-primary-dark text-white"}`,children:x?r("common.saving",t)||"Saving...":h?r("address.update",t)||"Update Address":r("address.add",t)||"Add Address"}),i&&e.jsx("button",{type:"button",onClick:i,className:`px-6 py-3 rounded-lg font-medium transition-colors ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:r("common.cancel",t)||"Cancel"})]})]})]})},me=()=>{const{user:o}=I(),{currentLanguage:s}=M(),{isDarkMode:i}=T(),[t,a]=c.useState("profile"),[x,b]=c.useState([]),[$,u]=c.useState(!1),[F,m]=c.useState(!1),[h,n]=c.useState(null);c.useEffect(()=>{t==="addresses"&&j()},[t]);const j=async()=>{u(!0);try{const l=await te();l.data.success&&b(l.data.data.addresses)}catch{}finally{u(!1)}},d=async l=>{if(window.confirm(r("address.confirmDelete",s)||"Are you sure you want to delete this address?"))try{(await le(l)).data.success&&b(x.filter(y=>y._id!==l))}catch{}},N=()=>{m(!1),n(null),j()},A=[{id:"profile",label:r("profile.title",s)||"Profile",icon:L},{id:"addresses",label:r("address.title",s)||"Addresses",icon:D}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:r("profile.title",s)||"My Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r("profile.subtitle",s)||"Manage your personal information and addresses"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[e.jsx("div",{className:"w-full lg:w-72 flex-shrink-0",children:e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`rounded-2xl shadow-lg p-6 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white mb-4 shadow-lg ${i?"bg-gradient-to-br from-primary-dark to-primary-light":"bg-gradient-to-br from-primary-light to-primary-dark"}`,children:o!=null&&o.avatar?e.jsx("img",{src:o.avatar,alt:o.fullName,className:"w-full h-full rounded-full object-cover"}):e.jsx(L,{className:"w-10 h-10"})}),e.jsx("h2",{className:`text-lg font-semibold mb-1 ${i?"text-white":"text-gray-900"}`,children:(o==null?void 0:o.fullName)||"User"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:(o==null?void 0:o.email)||""})]}),e.jsx("nav",{className:"space-y-2",children:A.map(l=>{const p=l.icon,y=t===l.id;return e.jsxs("button",{onClick:()=>a(l.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${y?i?"bg-gradient-to-r from-primary-dark to-primary-light text-white shadow-md":"bg-gradient-to-r from-primary-light to-primary-dark text-white shadow-md":i?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(p,{className:`w-5 h-5 ${y?"text-white":""}`}),e.jsx("span",{className:"font-medium",children:l.label})]},l.id)})})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(f.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[t==="profile"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`rounded-2xl shadow-lg p-6 md:p-8 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"}`,children:r("profile.information",s)||"Profile Information"}),e.jsx(de,{onSuccess:()=>{}})]})}),t==="addresses"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-2xl shadow-lg p-6 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-1 ${i?"text-white":"text-gray-900"}`,children:r("address.title",s)||"My Addresses"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:r("address.subtitle",s)||"Manage your delivery addresses"})]}),e.jsxs("button",{onClick:()=>{n(null),m(!0)},className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 ${i?"bg-gradient-to-r from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-r from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:r("address.add",s)||"Add Address"})]})]})}),F&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`rounded-2xl shadow-lg p-6 md:p-8 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:e.jsx(ne,{address:h,onSuccess:N,onCancel:()=>{m(!1),n(null)}})}),$?e.jsxs("div",{className:`rounded-2xl shadow-lg p-12 text-center ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-light mx-auto mb-4"}),e.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:r("common.loading",s)||"Loading..."})]}):x.length===0?e.jsxs("div",{className:`rounded-2xl shadow-lg p-12 text-center ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${i?"bg-gray-700/50":"bg-gray-100"}`,children:e.jsx(D,{className:`text-3xl ${i?"text-gray-500":"text-gray-400"}`})}),e.jsx("h3",{className:`text-lg font-semibold mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:r("address.empty",s)||"No addresses saved"}),e.jsx("p",{className:"text-sm text-gray-500",children:r("address.emptyHint",s)||"Add your first address to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(l=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`rounded-2xl shadow-lg p-6 relative transition-all duration-200 hover:shadow-xl ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50 hover:border-gray-600":"bg-white/95 backdrop-blur-md border border-gray-200/50 hover:border-gray-300"} ${l.isDefault?"ring-2 ring-primary-light ring-opacity-50":""}`,children:[l.isDefault&&e.jsxs("div",{className:`absolute top-4 right-4 px-3 py-1.5 rounded-full text-xs font-semibold flex items-center space-x-1.5 shadow-md ${i?"bg-gradient-to-r from-primary-dark to-primary-light text-white":"bg-gradient-to-r from-primary-light to-primary-dark text-white"}`,children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:r("address.default",s)||"Default"})]}),e.jsxs("div",{className:"mb-6 pr-20",children:[e.jsx("h3",{className:`font-semibold text-lg mb-3 text-left ${i?"text-white":"text-gray-900"}`,children:l.fullName}),e.jsxs("div",{className:`space-y-1.5 text-sm text-left ${i?"text-gray-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-left",children:l.addressLine1}),l.addressLine2&&e.jsx("p",{className:"text-left",children:l.addressLine2}),e.jsxs("p",{className:"text-left",children:[l.city,", ",l.state," ",l.postalCode]}),e.jsx("p",{className:"text-left",children:l.country}),l.phone&&e.jsx("p",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 text-left",children:l.phone})]}),e.jsx("div",{className:`mt-3 inline-block px-3 py-1 rounded-lg text-xs font-medium text-left ${i?"bg-gray-700/50 text-gray-300":"bg-gray-100 text-gray-700"}`,children:r(`address.${l.type}`,s)||l.type})]}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>{n(l),m(!0)},className:`flex-1 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${i?"bg-gray-700/50 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:r("address.edit",s)||"Edit"})]}),e.jsx("button",{onClick:()=>d(l._id),className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center ${i?"bg-red-900/30 hover:bg-red-800/50 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:e.jsx(Z,{className:"w-4 h-4"})})]})]},l._id))})]})]},t)})]})]})})};export{me as default};
