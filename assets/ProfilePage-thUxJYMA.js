import{H as F,C as I,u as U,e as M,r as u,I as V,J as T,K as B,j as e,t as r,D as L,M as G,N as J,O,P as R,Q as _,_ as q,S as b,B as z,m as $,o as H,T as D,U as W,V as K,W as Q,X,Y,Z,$ as ee}from"./index-CFgquEk_.js";const re=async o=>await F.put("/users/profile",o),te=async o=>await F.post("/users/avatar/base64",{avatar:o}),ae=async()=>await F.get("/users/addresses"),se=async o=>await F.post("/users/addresses",o),le=async(o,s)=>await F.put(`/users/addresses/${o}`,s),ie=async o=>await F.delete(`/users/addresses/${o}`),de=_({fullName:b().min(2,"Name must be at least 2 characters"),phone:b().optional(),gender:q(["male","female","other","prefer-not-to-say"]).optional()}),oe=({onSuccess:o})=>{const{user:s,updateUser:i}=I(),{currentLanguage:t}=U(),{isDarkMode:a}=M(),[h,N]=u.useState(!1),[v,p]=u.useState(!1),m=V(),[y,j]=u.useState((s==null?void 0:s.avatar)||null),{register:n,handleSubmit:w,formState:{errors:l},reset:k}=T({resolver:B(de),defaultValues:{fullName:(s==null?void 0:s.fullName)||"",phone:(s==null?void 0:s.phone)||"",gender:(s==null?void 0:s.gender)||""}});u.useEffect(()=>{s&&(k({fullName:s.fullName||"",phone:s.phone||"",gender:s.gender||""}),j(s.avatar||null))},[s,k]);const A=async f=>{const g=f.target.files[0];if(g){if(!g.type.startsWith("image/")){m.error("Please select an image file");return}if(g.size>5*1024*1024){m.error("Image size must be less than 5MB");return}p(!0);try{const x=new FileReader;x.onload=async()=>{var S,P;const C=x.result;try{const c=await te(C);c.data.success?(j(c.data.data.avatar),i({...s,avatar:c.data.data.avatar}),m.success("Avatar uploaded successfully")):m.error(c.data.message||"Failed to upload avatar")}catch(c){m.error(((P=(S=c.response)==null?void 0:S.data)==null?void 0:P.message)||"Failed to upload avatar")}finally{p(!1)}},x.onerror=()=>{p(!1),m.error("Failed to read the image file.")},x.readAsDataURL(g)}catch{p(!1),m.error("Failed to process the image file.")}}},d=async f=>{var g,x,C,S,P;N(!0);try{const c=await re(f);if(console.log("Update profile response:",c),(g=c==null?void 0:c.data)!=null&&g.success){const E=(x=c.data.data)==null?void 0:x.user;E?(i(E),m.success("Profile updated successfully"),o&&o()):m.error("Invalid response from server")}else m.error(((C=c==null?void 0:c.data)==null?void 0:C.message)||"Failed to update profile")}catch(c){console.error("Profile update error:",c),m.error(((P=(S=c.response)==null?void 0:S.data)==null?void 0:P.message)||c.message||"Failed to update profile")}finally{N(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("profile.avatar",t)||"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden border-2 ${a?"border-gray-600":"border-gray-300"}`,children:y?e.jsx("img",{src:y,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:`w-full h-full flex items-center justify-center ${a?"bg-gray-700":"bg-gray-200"}`,children:e.jsx(L,{className:`text-4xl ${a?"text-gray-500":"text-gray-400"}`})})}),e.jsx("label",{htmlFor:"avatar-upload",className:`absolute bottom-0 right-0 p-2 rounded-full cursor-pointer transition-all duration-200 shadow-md hover:shadow-lg ${a?"bg-gradient-to-br from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-br from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:A,className:"hidden",disabled:v})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:r("profile.avatarHint",t)||"Click camera icon to upload"}),v&&e.jsx("p",{className:"text-sm text-primary-light",children:"Uploading..."})]})]})]}),e.jsxs("form",{onSubmit:w(d),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("auth.fullName",t)||"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("fullName"),type:"text",id:"fullName",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${l.fullName?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.fullNamePlaceholder",t)||"John Doe"})]}),l.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.fullName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("auth.email",t)||"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(J,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{type:"email",id:"email",value:(s==null?void 0:s.email)||"",disabled:!0,className:`w-full pl-10 pr-4 py-3 rounded-xl border ${a?"bg-gray-700/50 border-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed"}`})]}),e.jsx("p",{className:`mt-1 text-xs ${a?"text-gray-500":"text-gray-400"}`,children:r("profile.emailHint",t)||"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("auth.phone",t)||"Phone"," (",r("auth.optional",t)||"Optional",")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(O,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("phone"),type:"tel",id:"phone",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${l.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.phonePlaceholder",t)||"+1 234 567 8900"})]}),l.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.phone.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"gender",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("auth.gender",t)||"Gender"," (",r("auth.optional",t)||"Optional",")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsxs("select",{...n("gender"),id:"gender",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${l.gender?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"",children:r("auth.selectGender",t)||"Select gender"}),e.jsx("option",{value:"male",children:r("auth.male",t)||"Male"}),e.jsx("option",{value:"female",children:r("auth.female",t)||"Female"}),e.jsx("option",{value:"other",children:r("auth.other",t)||"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:r("auth.preferNotToSay",t)||"Prefer not to say"})]})]}),l.gender&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.gender.message})]}),e.jsx("button",{type:"submit",disabled:h,className:`w-full py-3.5 px-6 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 ${h?"bg-gray-400 cursor-not-allowed":a?"bg-gradient-to-r from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-r from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:h?r("profile.updating",t)||"Updating...":r("profile.update",t)||"Update Profile"})]})]})},ne=_({type:q(["billing","shipping","both"]),fullName:b().min(2,"Full name must be at least 2 characters"),phone:b().optional(),addressLine1:b().min(5,"Address line 1 is required"),addressLine2:b().optional(),city:b().min(2,"City is required"),state:b().min(2,"State/Province is required"),postalCode:b().min(3,"Postal code is required"),country:b().min(2,"Country is required"),isDefault:X().optional()}),ce=({address:o,onSuccess:s,onCancel:i})=>{const{currentLanguage:t}=U(),{isDarkMode:a}=M(),[h,N]=u.useState(!1),[v,p]=u.useState(!1),[m,y]=u.useState(""),j=!!o,{register:n,handleSubmit:w,formState:{errors:l},reset:k}=T({resolver:B(ne),defaultValues:o||{type:"both",fullName:"",phone:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:"United States",isDefault:!1}}),A=async d=>{var f,g;N(!0),y(""),p(!1);try{let x;j?x=await le(o._id,d):x=await se(d),x.data.success&&(p(!0),k(),setTimeout(()=>{p(!1),s&&s()},2e3))}catch(x){y(((g=(f=x.response)==null?void 0:f.data)==null?void 0:g.message)||`Failed to ${j?"update":"add"} address`)}finally{N(!1)}};return e.jsxs("div",{className:`rounded-2xl shadow-lg p-6 ${a?"bg-gray-800/95 backdrop-blur-md border border-gray-700":"bg-white/95 backdrop-blur-md border border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-xl font-bold ${a?"text-white":"text-gray-900"}`,children:j?r("address.edit",t)||"Edit Address":r("address.add",t)||"Add New Address"}),i&&e.jsx("button",{onClick:i,className:`p-2 rounded-full transition-colors ${a?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:e.jsx(z,{className:"w-5 h-5"})})]}),v&&e.jsxs($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-lg bg-green-500/20 border border-green-500/50 flex items-center space-x-2",children:[e.jsx(H,{className:"text-green-500"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:r("address.success",t)||"Address saved successfully!"})]}),m&&e.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 rounded-lg bg-red-500/20 border border-red-500/50",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:m})}),e.jsxs("form",{onSubmit:w(A),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.type",t)||"Address Type"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsxs("select",{...n("type"),id:"type",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.type?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2 appearance-none cursor-pointer`,children:[e.jsx("option",{value:"both",children:r("address.both",t)||"Both (Billing & Shipping)"}),e.jsx("option",{value:"billing",children:r("address.billing",t)||"Billing"}),e.jsx("option",{value:"shipping",children:r("address.shipping",t)||"Shipping"})]})]}),l.type&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.type.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("auth.fullName",t)||"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(L,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("fullName"),type:"text",id:"fullName",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.fullName?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.fullNamePlaceholder",t)||"John Doe"})]}),l.fullName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.fullName.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("auth.phone",t)||"Phone"," (",r("auth.optional",t)||"Optional",")"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(O,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("phone"),type:"tel",id:"phone",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.phone?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("auth.phonePlaceholder",t)||"+1 234 567 8900"})]}),l.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"addressLine1",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.line1",t)||"Address Line 1"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("addressLine1"),type:"text",id:"addressLine1",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.addressLine1?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.line1Placeholder",t)||"Street address, P.O. box"})]}),l.addressLine1&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.addressLine1.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"addressLine2",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:[r("address.line2",t)||"Address Line 2"," (",r("auth.optional",t)||"Optional",")"]}),e.jsx("input",{...n("addressLine2"),type:"text",id:"addressLine2",className:`w-full px-4 py-3 rounded-lg border transition-colors text-left ${l.addressLine2?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.line2Placeholder",t)||"Apartment, suite, unit, building, floor, etc."}),l.addressLine2&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.addressLine2.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.city",t)||"City"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("city"),type:"text",id:"city",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.city?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.cityPlaceholder",t)||"City"})]}),l.city&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"state",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.state",t)||"State/Province"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(K,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("state"),type:"text",id:"state",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.state?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.statePlaceholder",t)||"State"})]}),l.state&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.state.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postalCode",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.postalCode",t)||"Postal Code"}),e.jsx("input",{...n("postalCode"),type:"text",id:"postalCode",className:`w-full px-4 py-3 rounded-lg border transition-colors text-left ${l.postalCode?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.postalCodePlaceholder",t)||"12345"}),l.postalCode&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.postalCode.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:`block text-left text-sm font-medium mb-2 ${a?"text-gray-300":"text-gray-700"}`,children:r("address.country",t)||"Country"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:`h-5 w-5 ${a?"text-gray-500":"text-gray-400"}`})}),e.jsx("input",{...n("country"),type:"text",id:"country",className:`w-full pl-10 pr-4 py-3 rounded-lg border transition-colors text-left ${l.country?"border-red-500 focus:border-red-500 focus:ring-red-500":a?"bg-gray-700 border-gray-600 text-white focus:border-primary-dark focus:ring-primary-dark":"bg-white border-gray-300 text-gray-900 focus:border-primary-light focus:ring-primary-light"} focus:outline-none focus:ring-2`,placeholder:r("address.countryPlaceholder",t)||"United States"})]}),l.country&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.country.message})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("isDefault"),type:"checkbox",id:"isDefault",className:`w-4 h-4 rounded border-gray-300 text-primary-light focus:ring-primary-light ${a?"bg-gray-700 border-gray-600":"bg-white"}`}),e.jsx("label",{htmlFor:"isDefault",className:`ml-2 text-sm ${a?"text-gray-300":"text-gray-700"}`,children:r("address.setDefault",t)||"Set as default address"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:h,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-colors ${h?"bg-gray-400 cursor-not-allowed":a?"bg-primary-dark hover:bg-primary-light text-white":"bg-primary-light hover:bg-primary-dark text-white"}`,children:h?r("common.saving",t)||"Saving...":j?r("address.update",t)||"Update Address":r("address.add",t)||"Add Address"}),i&&e.jsx("button",{type:"button",onClick:i,className:`px-6 py-3 rounded-lg font-medium transition-colors ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:r("common.cancel",t)||"Cancel"})]})]})]})},ge=()=>{const{user:o}=I(),{currentLanguage:s}=U(),{isDarkMode:i}=M(),[t,a]=u.useState("profile"),[h,N]=u.useState([]),[v,p]=u.useState(!1),[m,y]=u.useState(!1),[j,n]=u.useState(null);u.useEffect(()=>{t==="addresses"&&w()},[t]);const w=async()=>{p(!0);try{const d=await ae();d.data.success&&N(d.data.data.addresses)}catch{}finally{p(!1)}},l=async d=>{if(window.confirm(r("address.confirmDelete",s)||"Are you sure you want to delete this address?"))try{(await ie(d)).data.success&&N(h.filter(g=>g._id!==d))}catch{}},k=()=>{y(!1),n(null),w()},A=[{id:"profile",label:r("profile.title",s)||"Profile",icon:L},{id:"addresses",label:r("address.title",s)||"Addresses",icon:D}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:r("profile.title",s)||"My Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r("profile.subtitle",s)||"Manage your personal information and addresses"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[e.jsx("div",{className:"w-full lg:w-72 flex-shrink-0",children:e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`rounded-2xl shadow-lg p-6 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white mb-4 shadow-lg ${i?"bg-gradient-to-br from-primary-dark to-primary-light":"bg-gradient-to-br from-primary-light to-primary-dark"}`,children:o!=null&&o.avatar?e.jsx("img",{src:o.avatar,alt:o.fullName,className:"w-full h-full rounded-full object-cover"}):e.jsx(L,{className:"w-10 h-10"})}),e.jsx("h2",{className:`text-lg font-semibold mb-1 ${i?"text-white":"text-gray-900"}`,children:(o==null?void 0:o.fullName)||"User"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:(o==null?void 0:o.email)||""})]}),e.jsx("nav",{className:"space-y-2",children:A.map(d=>{const f=d.icon,g=t===d.id;return e.jsxs("button",{onClick:()=>a(d.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200 ${g?i?"bg-gradient-to-r from-primary-dark to-primary-light text-white shadow-md":"bg-gradient-to-r from-primary-light to-primary-dark text-white shadow-md":i?"text-gray-300 hover:bg-gray-700/50 hover:text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(f,{className:`w-5 h-5 ${g?"text-white":""}`}),e.jsx("span",{className:"font-medium",children:d.label})]},d.id)})})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs($.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[t==="profile"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`rounded-2xl shadow-lg p-6 md:p-8 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-6 ${i?"text-white":"text-gray-900"}`,children:r("profile.information",s)||"Profile Information"}),e.jsx(oe,{onSuccess:()=>{}})]})}),t==="addresses"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`rounded-2xl shadow-lg p-6 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold mb-1 ${i?"text-white":"text-gray-900"}`,children:r("address.title",s)||"My Addresses"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-600"}`,children:r("address.subtitle",s)||"Manage your delivery addresses"})]}),e.jsxs("button",{onClick:()=>{n(null),y(!0)},className:`px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center justify-center space-x-2 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 ${i?"bg-gradient-to-r from-primary-dark to-primary-light hover:from-primary-light hover:to-primary-dark text-white":"bg-gradient-to-r from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-light text-white"}`,children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:r("address.add",s)||"Add Address"})]})]})}),m&&e.jsx($.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`rounded-2xl shadow-lg p-6 md:p-8 ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:e.jsx(ce,{address:j,onSuccess:k,onCancel:()=>{y(!1),n(null)}})}),v?e.jsxs("div",{className:`rounded-2xl shadow-lg p-12 text-center ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-light mx-auto mb-4"}),e.jsx("p",{className:i?"text-gray-400":"text-gray-600",children:r("common.loading",s)||"Loading..."})]}):h.length===0?e.jsxs("div",{className:`rounded-2xl shadow-lg p-12 text-center ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50":"bg-white/95 backdrop-blur-md border border-gray-200/50"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${i?"bg-gray-700/50":"bg-gray-100"}`,children:e.jsx(D,{className:`text-3xl ${i?"text-gray-500":"text-gray-400"}`})}),e.jsx("h3",{className:`text-lg font-semibold mb-2 ${i?"text-gray-300":"text-gray-700"}`,children:r("address.empty",s)||"No addresses saved"}),e.jsx("p",{className:"text-sm text-gray-500",children:r("address.emptyHint",s)||"Add your first address to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(d=>e.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`rounded-2xl shadow-lg p-6 relative transition-all duration-200 hover:shadow-xl ${i?"bg-gray-800/95 backdrop-blur-md border border-gray-700/50 hover:border-gray-600":"bg-white/95 backdrop-blur-md border border-gray-200/50 hover:border-gray-300"} ${d.isDefault?"ring-2 ring-primary-light ring-opacity-50":""}`,children:[d.isDefault&&e.jsxs("div",{className:`absolute top-4 right-4 px-3 py-1.5 rounded-full text-xs font-semibold flex items-center space-x-1.5 shadow-md ${i?"bg-gradient-to-r from-primary-dark to-primary-light text-white":"bg-gradient-to-r from-primary-light to-primary-dark text-white"}`,children:[e.jsx(H,{className:"w-3 h-3"}),e.jsx("span",{children:r("address.default",s)||"Default"})]}),e.jsxs("div",{className:"mb-6 pr-20",children:[e.jsx("h3",{className:`font-semibold text-lg mb-3 text-left ${i?"text-white":"text-gray-900"}`,children:d.fullName}),e.jsxs("div",{className:`space-y-1.5 text-sm text-left ${i?"text-gray-400":"text-gray-600"}`,children:[e.jsx("p",{className:"text-left",children:d.addressLine1}),d.addressLine2&&e.jsx("p",{className:"text-left",children:d.addressLine2}),e.jsxs("p",{className:"text-left",children:[d.city,", ",d.state," ",d.postalCode]}),e.jsx("p",{className:"text-left",children:d.country}),d.phone&&e.jsx("p",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 text-left",children:d.phone})]}),e.jsx("div",{className:`mt-3 inline-block px-3 py-1 rounded-lg text-xs font-medium text-left ${i?"bg-gray-700/50 text-gray-300":"bg-gray-100 text-gray-700"}`,children:r(`address.${d.type}`,s)||d.type})]}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>{n(d),y(!0)},className:`flex-1 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${i?"bg-gray-700/50 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:r("address.edit",s)||"Edit"})]}),e.jsx("button",{onClick:()=>l(d._id),className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 flex items-center justify-center ${i?"bg-red-900/30 hover:bg-red-800/50 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:e.jsx(ee,{className:"w-4 h-4"})})]})]},d._id))})]})]},t)})]})]})})};export{ge as default};
